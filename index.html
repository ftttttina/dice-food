<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>ğŸ² æ‘‡ä¸€æ‘‡é€‰æ™šé¤</title>
  <style>
    :root { --accent: #ffcc00; }
    body {
      font-family: system-ui, -apple-system, sans-serif;
      background: #111; color: #fff; text-align: center;
      padding: 20px; margin: 0; min-height: 100vh;
      display: flex; flex-direction: column; align-items: center;
    }
    h1 { font-size: 1.8rem; margin-top: 40px; }
    
    /* éª°å­å®¹å™¨ */
    .dice-container { 
      display: flex; gap: 20px; margin: 40px 0; 
      font-size: 100px; /* å¢å¤§éª°å­å°ºå¯¸ */
      line-height: 1;
      height: 110px;
    }
    
    .rolling { animation: shake 0.15s infinite; color: var(--accent); }
    @keyframes shake {
      0% { transform: rotate(10deg) translate(2px, 2px); }
      50% { transform: rotate(-10deg) translate(-2px, -2px); }
      100% { transform: rotate(10deg) translate(2px, 2px); }
    }

    button {
      background: var(--accent); color: #000; border: none;
      padding: 16px 32px; font-size: 1.1rem; font-weight: bold;
      border-radius: 50px; cursor: pointer; margin: 10px;
      transition: transform 0.1s;
    }
    button:active { transform: scale(0.95); }
    
    #motionBtn { background: #333; color: #aaa; font-size: 0.8rem; padding: 10px 20px; }

    .result-card {
      margin-top: 30px; padding: 25px; border-radius: 25px;
      background: rgba(255,255,255,0.08); border: 1px solid rgba(255,255,255,0.1);
      width: 85%; max-width: 350px;
      animation: popIn 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }
    @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
  </style>
</head>
<body>

  <h1>ğŸ² æ™šä¸Šåƒä»€ä¹ˆï¼Ÿ</h1>
  <p style="opacity: 0.5;">åˆ«çº ç»“äº†ï¼Œè®©å‘½å®šå†³å®š</p>

  <div class="dice-container">
    <div id="dice1">âš„</div>
    <div id="dice2">âš‚</div>
  </div>

  <button id="rollBtn" onclick="rollDice()">æ·éª°å­</button>
  <button id="motionBtn" onclick="requestPermission()">å¼€å¯æ‰‹æœºæ‘‡ä¸€æ‘‡</button>

  <div id="result"></div>

  <script>
    // éª°å­å›¾å½¢æ˜ å°„
    const diceFaces = ["", "âš€", "âš", "âš‚", "âšƒ", "âš„", "âš…"];
    
    // æ•°æ®æ± 
    const foods = ["ç«é”…", "æ—¥æ–™", "æ±‰å ¡", "éŸ©æ–™", "æ„é¢", "èºè›³ç²‰", "çƒ§çƒ¤", "æ²™æ‹‰", "å·èœ", "æ³°æ–™"];
    const emojis = ["ğŸ”¥", "ğŸ£", "ğŸ”", "ğŸ¥˜", "ğŸ", "ğŸœ", "ğŸ¢", "ğŸ¥—", "ğŸŒ¶ï¸", "ğŸ›"];
    const quotes = [
      "è¿™å°±æ˜¯ä½ çš„å‘½ï¼Œåƒå§ã€‚",
      "åˆ«çœ‹äº†ï¼Œå†æ‘‡ä¸€æ¬¡ä½ ä¹Ÿè¿˜æ˜¯æƒ³åƒè¿™ä¸ªã€‚",
      "ä½ çš„é€‰æ‹©å›°éš¾ç—‡åœ¨è¿™é‡Œè¢«ç»ˆç»“äº†ã€‚",
      "å¡«å……ä½ ç©ºè™šçš„èƒƒï¼Œè¿˜æœ‰ä½ ç©ºè™šçš„çµé­‚ã€‚",
      "å¿«é¤é…å¿«é¤å¼çš„äººç”Ÿã€‚"
    ];

    function rollDice() {
      const d1 = document.getElementById("dice1");
      const d2 = document.getElementById("dice2");
      const btn = document.getElementById("rollBtn");
      const resultBox = document.getElementById("result");
      
      if (btn.disabled) return;
      btn.disabled = true;
      resultBox.innerHTML = ""; // æ¸…ç©ºä¸Šæ¬¡ç»“æœ

      // æ·»åŠ åŠ¨ç”»
      d1.classList.add("rolling");
      d2.classList.add("rolling");

      // æ¨¡æ‹Ÿæ»šåŠ¨è¿‡ç¨‹ä¸­çš„éšæœºè·³åŠ¨
      let count = 0;
      const interval = setInterval(() => {
        d1.textContent = diceFaces[Math.floor(Math.random() * 6) + 1];
        d2.textContent = diceFaces[Math.floor(Math.random() * 6) + 1];
        count++;
        if (count > 10) {
          clearInterval(interval);
          finalize();
        }
      }, 80);

      function finalize() {
        d1.classList.remove("rolling");
        d2.classList.remove("rolling");

        // çœŸæ­£çš„éšæœºé€‰æ‹©
        const foodIndex = Math.floor(Math.random() * foods.length);
        const quote = quotes[Math.floor(Math.random() * quotes.length)];
        
        resultBox.innerHTML = `
          <div class="result-card">
            <div style="font-size: 0.9rem; opacity: 0.6; margin-bottom: 5px;">å‘½å®šæ™šé¤ï¼š</div>
            <div style="font-size: 1.8rem; font-weight: bold; margin-bottom: 10px;">
              ${emojis[foodIndex]} ${foods[foodIndex]}
            </div>
            <div style="font-style: italic; opacity: 0.8; font-size: 0.9rem; border-top: 1px solid #444; pt-10; margin-top: 10px; padding-top: 10px;">
              "${quote}"
            </div>
          </div>
        `;
        btn.disabled = false;
      }
    }

    // --- ä¼ æ„Ÿå™¨ä»£ç  (ä¿æŒä¸å˜) ---
    let lastUpdate = 0, lastX, lastY, lastZ;
    function requestPermission() {
      if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission().then(res => {
          if (res === 'granted') {
            startMotion();
            document.getElementById("motionBtn").style.display = "none";
          }
        });
      } else {
        startMotion();
        document.getElementById("motionBtn").textContent = "æ‘‡ä¸€æ‘‡å·²å°±ç»ª";
      }
    }

    function startMotion() {
      window.addEventListener('devicemotion', (e) => {
        const acc = e.accelerationIncludingGravity;
        const now = Date.now();
        if ((now - lastUpdate) > 100) {
          let diff = now - lastUpdate;
          lastUpdate = now;
          let speed = Math.abs(acc.x + acc.y + acc.z - lastX - lastY - lastZ) / diff * 10000;
          if (speed > 1000) rollDice();
          lastX = acc.x; lastY = acc.y; lastZ = acc.z;
        }
      });
    }
  </script>
</body>
</html>
