<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <title>DESTINY DINNER - MONOCHROME</title>
  <style>
    :root { 
      --accent: #ffffff; /* 纯白高亮 */
      --glass-bg: rgba(255, 255, 255, 0.03); 
      --glass-border: rgba(255, 255, 255, 0.15);
      --dot-color: rgba(255, 255, 255, 0.85);
      --bg-deep: #000000;
    }

    body {
      font-family: "SF Pro Display", -apple-system, sans-serif;
      margin: 0; padding: 0; height: 100vh; width: 100vw;
      background: var(--bg-deep); overflow: hidden;
      display: flex; flex-direction: column; align-items: center; color: #fff;
    }

    /* --- Apple 灰阶呼吸感背景 --- */
    .bg-container {
      position: fixed; top: 0; left: 0; width: 100%; height: 100%;
      z-index: -1; filter: blur(100px); opacity: 0.5;
    }
    .blob { position: absolute; width: 700px; height: 700px; border-radius: 50%; }
    /* 利用灰色阶梯产生明暗对比 */
    .blob-1 { background: #2c2c2e; top: -20%; left: -10%; animation: breathe 10s infinite alternate ease-in-out; }
    .blob-2 { background: #1c1c1e; bottom: -10%; right: -10%; animation: breathe 12s infinite alternate-reverse ease-in-out; }
    .blob-3 { background: #3a3a3c; top: 30%; left: 10%; animation: breathe 15s infinite linear; }

    @keyframes breathe {
      0% { transform: translate(0,0) scale(1); opacity: 0.3; }
      100% { transform: translate(100px, 50px) scale(1.4); opacity: 0.7; }
    }

    /* --- 极简文字 --- */
    .header { margin-top: 80px; text-align: center; }
    h1 { font-weight: 200; font-size: 0.8rem; letter-spacing: 12px; margin: 0; text-transform: uppercase; color: rgba(255,255,255,0.9); }
    .sub-head { font-size: 0.45rem; letter-spacing: 4px; opacity: 0.2; margin-top: 8px; text-transform: uppercase; }

    /* --- 3D 灰阶玻璃骰子 --- */
    .dice-box { display: flex; gap: 40px; margin: 80px 0; }
    .scene { width: 65px; height: 65px; perspective: 800px; }
    .cube {
      width: 100%; height: 100%; position: relative;
      transform-style: preserve-3d;
      transform: rotateX(-15deg) rotateY(15deg);
    }
    .cube div {
      position: absolute; width: 65px; height: 65px;
      background: var(--glass-bg); 
      backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
      border: 0.5px solid var(--glass-border); border-radius: 14px;
      display: grid; padding: 10px; box-sizing: border-box;
      /* 增加内发光，模拟侧边金属光感 */
      box-shadow: inset 0 0 10px rgba(255,255,255,0.02);
    }

    .dot { display: block; width: 10px; height: 10px; background: var(--dot-color); border-radius: 50%; align-self: center; justify-self: center; }
    /* 1点改为冷白色，不再使用红色，保持色调纯净 */
    .face-1 .dot { background: #fff; box-shadow: 0 0 10px rgba(255,255,255,0.5); }

    /* 布局逻辑保持不变 */
    .face-1 { grid-template-areas: "a"; }
    .face-2 { display: flex; justify-content: space-between; } .face-2 .dot:nth-child(2) { align-self: flex-end; }
    .face-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; }
    .face-3 .dot:nth-child(1) { grid-area: 1/1; } .face-3 .dot:nth-child(2) { grid-area: 2/2; } .face-3 .dot:nth-child(3) { grid-area: 3/3; }
    .face-4 { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr; }
    .face-5 { display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; } .face-5 .dot:nth-child(5) { grid-area: 2/2; }
    .face-6 { display: grid; grid-template-columns: 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; }

    .front { transform: rotateY(0deg) translateZ(32.5px); } .back { transform: rotateY(180deg) translateZ(32.5px); }
    .right { transform: rotateY(90deg) translateZ(32.5px); } .left { transform: rotateY(-90deg) translateZ(32.5px); }
    .top { transform: rotateX(90deg) translateZ(32.5px); } .bottom { transform: rotateX(-90deg) translateZ(32.5px); }

    @keyframes fast-spin { 
      from { transform: rotateX(0) rotateY(0) rotateZ(0); }
      to { transform: rotateX(360deg) rotateY(360deg) rotateZ(180deg); } 
    }

    /* --- 极简控制组 --- */
    .controls { display: flex; gap: 15px; }
    .glass-btn {
      background: rgba(255, 255, 255, 0.03); border: 0.5px solid rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(30px); color: rgba(255,255,255,0.8); padding: 10px 20px; border-radius: 10px; 
      cursor: pointer; transition: 0.4s;
    }
    .glass-btn:active { transform: translateY(1px); opacity: 0.6; }
    .active-motion { border-color: rgba(255,255,255,0.4); color: #fff; }

    .btn-text { font-size: 0.7rem; font-weight: 300; letter-spacing: 2px; display: block; }
    .btn-en { font-size: 0.4rem; opacity: 0.3; text-transform: uppercase; margin-top: 3px; }

    /* --- 结果卡片 --- */
    .result-card {
      margin-top: 60px; padding: 30px; border-radius: 2px; /* 采用硬朗的极小圆角，更显高端 */
      background: rgba(255, 255, 255, 0.02); border-left: 1px solid rgba(255, 255, 255, 0.2);
      backdrop-filter: blur(40px); width: 200px; text-align: left;
      animation: fadeIn 1s ease forwards;
    }
    @keyframes fadeIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    .food-cn { font-size: 1.4rem; font-weight: 300; letter-spacing: 4px; display: block; }
    .food-en { font-size: 0.55rem; opacity: 0.3; text-transform: uppercase; letter-spacing: 2px; margin: 4px 0 20px 0; display: block; }
    .quote-cn { font-size: 0.7rem; opacity: 0.5; font-weight: 200; display: block; line-height: 1.6; }
    .quote-en { font-size: 0.5rem; opacity: 0.2; font-style: italic; display: block; margin-top: 4px; }
  </style>
</head>
<body>

  <div class="bg-container">
    <div class="blob blob-1"></div><div class="blob blob-2"></div><div class="blob blob-3"></div>
  </div>

  <div class="header">
    <h1>命定晚餐</h1>
    <div class="sub-head">The Destiny Dinner - Monochrome</div>
  </div>
  
  <div class="dice-box">
    <div class="scene"><div id="cube1" class="cube">
      <div class="front face-1"><span class="dot"></span></div>
      <div class="back face-2"><span class="dot"></span><span class="dot"></span></div>
      <div class="right face-3"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="left face-4"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="top face-5"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="bottom face-6"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
    </div></div>
    <div class="scene"><div id="cube2" class="cube">
      <div class="front face-1"><span class="dot"></span></div>
      <div class="back face-2"><span class="dot"></span><span class="dot"></span></div>
      <div class="right face-3"><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="left face-4"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="top face-5"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
      <div class="bottom face-6"><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span><span class="dot"></span></div>
    </div></div>
  </div>

  <div class="controls">
    <button class="glass-btn" onclick="rollDice()">
      <span class="btn-text">掷骰</span><span class="btn-en">Manual</span>
    </button>
    <button id="motionBtn" class="glass-btn" onclick="requestMotion()">
      <span class="btn-text">感应</span><span class="btn-en">Motion</span>
    </button>
  </div>

  <div id="result"></div>
  <audio id="diceSound" src="https://www.soundjay.com/misc/sounds/dice-throw-1.mp3"></audio>

  <script>
    const rotations = [
      { x: 0, y: 0 }, { x: 0, y: 180 }, { x: 0, y: -90 }, 
      { x: 0, y: 90 }, { x: -90, y: 0 }, { x: 90, y: 0 }
    ];
    const menu = [
      { cn: "火锅", en: "HOT POT", q_cn: "静谧中的沸腾。", q_en: "Boiling in silence." },
      { cn: "拉面", en: "RAMEN", q_cn: "一碗入魂的纯粹。", q_en: "The purity of a soul bowl." },
      { cn: "西餐", en: "BISTRO", q_cn: "仪式感的极致表达。", q_en: "Expression of ritualism." },
      { cn: "怀石", en: "KAISEKI", q_cn: "自然的季节馈赠。", q_en: "Gifts of the season." }
    ];

    let rolling = false;

    function rollDice() {
      if (rolling) return;
      rolling = true;
      const sound = document.getElementById("diceSound");
      sound.currentTime = 0; sound.play().catch(()=>{});

      const c1 = document.getElementById("cube1");
      const c2 = document.getElementById("cube2");
      document.getElementById("result").innerHTML = "";

      c1.style.animation = `fast-spin ${(Math.random() * 0.1 + 0.3).toFixed(2)}s infinite linear`;
      c2.style.animation = `fast-spin ${(Math.random() * 0.1 + 0.4).toFixed(2)}s infinite linear`;

      setTimeout(() => {
        stopCube(c1, 0);
        stopCube(c2, 120);

        const choice = menu[Math.floor(Math.random() * menu.length)];
        setTimeout(() => {
          document.getElementById("result").innerHTML = `
            <div class="result-card">
              <span class="food-cn">${choice.cn}</span><span class="food-en">${choice.en}</span>
              <span class="quote-cn">${choice.q_cn}</span><span class="quote-en">${choice.q_en}</span>
            </div>
          `;
          rolling = false;
        }, 1000);
      }, 700);
    }

    function stopCube(cube, delay) {
      setTimeout(() => {
        cube.style.animation = "none";
        const r = Math.floor(Math.random() * 6);
        const offset = (Math.floor(Math.random() * 2) + 2) * 360;
        const skewX = (Math.random() - 0.5) * 10;
        
        cube.style.transition = `transform 1.3s cubic-bezier(0.19, 1, 0.22, 1)`;
        cube.style.transform = `rotateX(${rotations[r].x + offset + skewX}deg) rotateY(${rotations[r].y + offset}deg)`;
      }, delay);
    }

    function requestMotion() {
      if (typeof DeviceMotionEvent !== 'undefined' && typeof DeviceMotionEvent.requestPermission === 'function') {
        DeviceMotionEvent.requestPermission().then(res => { if (res === 'granted') setupMotion(); });
      } else { setupMotion(); }
    }

    function setupMotion() {
      let lastX, lastY, lastZ, lastUpdate = 0;
      window.addEventListener('devicemotion', (e) => {
        const acc = e.accelerationIncludingGravity;
        const now = Date.now();
        if ((now - lastUpdate) > 100) {
          let diff = now - lastUpdate; lastUpdate = now;
          let speed = Math.abs(acc.x + acc.y + acc.z - lastX - lastY - lastZ) / diff * 10000;
          if (speed > 2500) rollDice();
          lastX = acc.x; lastY = acc.y; lastZ = acc.z;
        }
      });
      document.getElementById("motionBtn").classList.add("active-motion");
    }
  </script>
</body>
</html>
